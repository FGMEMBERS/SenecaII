<?xml version="1.0"?>
<!--
 This file is part of FlightGear, the free flight simulator
 http://www.flightgear.org/

 Copyright (C) 2009 Torsten Dreyer, Torsten (at) t3r _dot_ de

 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License as
 published by the Free Software Foundation; either version 2 of the
 License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 General Public License for more details.
-->
<!-- Some low pass filters to soften the response of various instruments -->
<PropertyList>
  <filter>
    <name>RPM Indicator-Left filter</name>
    <debug>false</debug>
    <type>exponential</type>
    <filter-time>0.5</filter-time> 
    <input>engines/engine[0]/rpm</input>
    <output>engines/engine[0]/rpm-filtered</output>
  </filter>

  <filter>
    <name>RPM Indicator-Right filter</name>
    <debug>false</debug>
    <type>exponential</type>
    <filter-time>0.6</filter-time>
    <input>engines/engine[1]/rpm</input>
    <output>engines/engine[1]/rpm-filtered</output>
  </filter>

  <filter>
    <name>MAP Indicator-Left filter</name>
    <debug>false</debug>
    <type>exponential</type>
    <filter-time>1.0</filter-time> 
    <input>engines/engine[0]/mp-osi</input>
    <output>engines/engine[0]/mp-osi-filtered</output>
  </filter>

  <logic>
    <name>Overboost Indicator Left</name>
    <input>
      <greater-than>
        <property>engines/engine[0]/mp-osi-filtered</property>
        <value>40.0</value>
      </greater-than>
    </input>
    <output>instrumentation/annunciator/overboost[0]</output>
  </logic>

  <logic>
    <name>Overboost Indicator Right</name>
    <input>
      <greater-than>
        <property>engines/engine[1]/mp-osi-filtered</property>
        <value>40.0</value>
      </greater-than>
    </input>
    <output>instrumentation/annunciator/overboost[1]</output>
  </logic>

  <filter>
    <name>MAP Indicator-Right filter</name>
    <debug>false</debug>
    <type>exponential</type>
    <filter-time>1.1</filter-time> 
    <input>engines/engine[1]/mp-osi</input>
    <output>engines/engine[1]/mp-osi-filtered</output>
  </filter>

  <filter>
    <name>EGT Indicator-Left filter</name>
    <debug>false</debug>
    <type>exponential</type>
    <filter-time>8.0</filter-time> 
    <input>engines/engine[0]/egt-degf</input>
    <output>engines/engine[0]/egt-degf-filtered</output>
  </filter>

  <filter>
    <name>EGT Indicator-Right filter</name>
    <debug>false</debug>
    <type>exponential</type>
    <filter-time>8.3</filter-time> 
    <input>engines/engine[1]/egt-degf</input>
    <output>engines/engine[1]/egt-degf-filtered</output>
  </filter>

  <!-- adjust the MAP due to RPM change by modifying the airtake-impedance -->
  <filter>
    <name>MAP by RPM adjust</name>
    <type>gain</type>
    <gain>1.0</gain>
    <input>
      <property>engines/engine[0]/rpm</property>
      <scale>-.002</scale>
      <offset>5.240</offset>
    </input>
    <output>fdm/jsbsim/propulsion/engine[0]/air-intake-impedance-factor</output>
    <min>0.0</min>
    <max>9999</max>
  </filter>

  <filter>
    <name>MAP by RPM adjust</name>
    <type>gain</type>
    <gain>1.0</gain>
    <input>
      <property>engines/engine[1]/rpm</property>
      <scale>-.0021</scale>
      <offset>5.4975</offset>
    </input>
    <output>fdm/jsbsim/propulsion/engine[1]/air-intake-impedance-factor</output>
    <min>0.0</min>
    <max>9999</max>
  </filter>

</PropertyList>
